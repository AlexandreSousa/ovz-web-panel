<% @page_title = t('admin.os_templates.title', { :name => @hardware_server.host }) %>

<% javascript_tag do -%>
Ext.onReady(function() {

  var store = new Ext.data.JsonStore({
    url: '/admin/os-templates/list_data?hardware_server_id=' + <%= @hardware_server.id %>,
    root: 'data',
    autoLoad: true,
    fields: [
      { name: 'id' },
      { name: 'name' }
    ]
  });
  
  var selectionModel = new Ext.grid.CheckboxSelectionModel();
  
  var osTemplatesGrid = new Ext.grid.GridPanel({
    id: 'osTemplatesGrid',
    store: store,
    title: '<%= tjs('admin.os_templates.grid.title') %>',
    cm: new Ext.grid.ColumnModel([
      selectionModel,
      {
        id: 'name',
        header: '<%= tjs('admin.os_templates.grid.column.name') %>',
        sortable: true,
        dataIndex: 'name'
      }
    ]),
    sm: selectionModel,
    stripeRows: true,
    autoExpandColumn: 'name',
    autoHeight: true,
    autoWidth: true,
    stripeRows: true,
    frame: true,
    iconCls: 'icon-items-list'
  });
  
  osTemplatesGrid.render('os-templates-list');
});
<% end -%>

<div id="os-templates-list"></div>